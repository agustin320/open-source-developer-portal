<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Off-Site Gateway | Server to Server | Dwolla API</title><meta name=description content="Obtain an OAuth access token, used to access data in the Dwolla API on behalf of a user or application. Learn more about how to utilize a server-to-server submission."><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.f62f.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.c226.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.db87.png><link rel=manifest href=/images/favicons/manifest.json><link rel=mask-icon href=/images/favicons/safari-pinned-tab.5f15.svg color=#ff7404><meta name=theme-color content=#ffffff><link rel=stylesheet href=/css/main.b7e3.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Roboto+Slab:300|Open+Sans:300,400,600,700"><script src=/js/head-scripts.e5a6.js></script><script src=https://cdn.statuspage.io/se-v2.js></script><script>(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
      'gtm.start': new Date().getTime(),
      event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
      j = d.createElement(s),
      dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
      'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
  })(window, document, 'script', 'dataLayer', 'GTM-WRT5LD6');</script></head><body><!--[if lt IE 8]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><header><div class="header__primary js-two-col-header-primary"><div class=page-wrap><div><a href=https://www.dwolla.com class="logo icon-logo-dwolla-white">Dwolla</a><div class=hamburger><a href="https://www.dwolla.com/contact?b=nav">Contact Sales</a> <a class="btn primary js-hamburger">Menu</a></div></div><nav class=js-hamburger-nav><a href=https://www.dwolla.com/platform>Platform</a> <a href="/">Developers</a> <a href="https://www.dwolla.com/updates/">Blog</a> <a href=https://www.dwolla.com/login>Login</a> <a class="btn primary" href="https://www.dwolla.com/contact?b=nav">Contact Sales</a></nav></div></div><nav class="header__secondary js-two-col-nav-toggle"><div class=js-two-col-header-secondary><div class=page-wrap><a href="/guides/" class=active>Guides</a> <a href="/resources/">Resources</a> <a href="https://docsv2.dwolla.com/">API docs</a> <a href=/pages/sdks.html class="no-nav js-two-col-no-toggle">SDKs</a><div class="custom-select custom-select--blue js-global-language-select"><select name=select class=js-language-select><option value=raw>raw</option><option value=php>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div></div></nav></header><div class=content><div class=cnt-two-col><div class=page-wrap><section class="cnt-two-col__nav js-two-col-nav"><div class=close><button class="js-two-col-nav-close icon-cnt-two-col-close"></button></div><div class=language-picker><h6>Language</h6><div class="custom-select custom-select--blue"><select class=js-language-select name=select><option value=raw>raw</option><option value=php selected>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div><!-- nav elements below should be in the same order of the secondary navigation --><nav class="side-nav js-side-nav active"><section id=js-sidenav-dropdown class=side-nav__dropdown><h6>Choose a guide</h6><div class=picker id=js-sidenav-dropdown-button><button>Please select a guide</button><div class="icon icon-side-nav-collapse-plus"></div><div class="icon icon-side-nav-collapse-minus"></div></div><nav id=js-sidenav-dropdown-nav><a href="/guides/sandbox-setup/">Getting started in Sandbox</a> <a href="/guides/send-money/">Send money to your users</a> <a href="/guides/receive-money/">Receive money from your users</a> <a href="/guides/transfer-money-between-users/">Transfer money between users</a> <a href="/guides/auth/">Authorization</a> <a href="/guides/webhooks/">Webhooks</a></nav></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/send-money>Overview: Send money to your users</a><div class=dot></div></li><li><a href=/guides/send-money/onboarding.html>Customer onboarding</a><div class=dot></div></li><li><a href=/guides/send-money/fetch-funding-sources.html class=active>Fetch funding sources</a><div class=dot></div></li><li><a href=/guides/send-money/create-transfer.html>Create a transfer</a><div class=dot></div></li><li><a href=/guides/send-money/check-transfer.html>Check transfer status</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/receive-money>Overview: Receive money from your users</a><div class=dot></div></li><li><a href=/guides/receive-money/onboarding.html>Customer onboarding</a><div class=dot></div></li><li><a href=/guides/receive-money/check-transfer.html class=active>Check transfer status</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/transfer-money-between-users>Overview: transfer money between your users</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/obtain-access-token.html>Obtain an application access token</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/create-verified-customer.html class=active>Create a Verified Customer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/attach-unverified-bank.html>Attach an unverified funding source</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/create-unverified-customer.html>Create an Unverified Customer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/attach-verified-bank.html>Attach a verified funding source</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/create-transfer.html>Create a transfer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/check-transfer.html>Check the status of your transfer</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>In this guide</h6><ol><li><a href=/guides/auth>Overview: Authorization</a><div class=dot></div></li><li><a href=/guides/auth/client-credentials-flow.html class=active>Client credentials flow</a><div class=dot></div></li><li><a href=/guides/auth/using-an-access-token.html>Using an access token</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/webhooks>Overview: Webhooks</a><div class=dot></div></li><li><a href=/guides/webhooks/obtain-authorization.html>Obtain authorization</a><div class=dot></div></li><li><a href=/guides/webhooks/create-subscription.html class=active>Create a webhook subscription</a><div class=dot></div></li><li><a href=/guides/webhooks/validating-webhooks.html>Validating webhooks</a><div class=dot></div></li><li><a href=/guides/webhooks/process-webhooks.html>Processing webhooks</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/migrate-to-v2>Overview: Migrate to the Dwolla v2 API</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/01-api-v2-principles.html>Dwolla v2 API principles</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/02-making-requests.html class=active>Making requests</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/03-authentication.html>Authentication</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/04-sdk-support.html>SDK support</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/05-v1-to-v2-endpoint-changes.html>v1 to Dwolla v2 API endpoint changes</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/06-other-notable-changes.html>Other notable changes</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/07-faq.html>FAQ</a><div class=dot></div></li></ol></section><section class=steps-nav><h6>In this guide</h6><ol><li><a href=/guides/offsite-gateway>Overview: Off-Site Gateway</a><div class=dot></div></li><li><a href=/guides/offsite-gateway/direct-submit.html>Direct submit option</a><div class=dot></div></li><li><a href=/guides/offsite-gateway/server-to-server.html class=active>Server-to-server option</a><div class=dot></div></li></ol></section><section class=side-nav__options><h6>Other Resources</h6><ul><li><a href="/guides/migrate-to-v2/"><span>Migrate to the Dwolla v2 API</span></a></li><li><a href="/guides/offsite-gateway/"><span>Off-Site Gateway</span></a></li><li class=external-link><a href="https://docs.dwolla.com/" target=_blank><span class=icon-sidenav-option>API v1 reference docs</span></a></li><li class=external-link><a href="https://docsv2.dwolla.com/transfer/" target=_blank><span class=icon-sidenav-option>Transfer API Docs</span></a></li></ul></section></nav><nav class="side-nav js-side-nav"><section><h6>Tools</h6><ul><li class=external-link><a href="http://dashboard-sandbox.dwolla.com/" target=_blank><span class=icon-sidenav-option>Sandbox Dashboard</span></a></li><li><a href=/resources/token-generator.html>Token generator</a></li><li><a href=/resources/changelog.html>Change log</a></li><li class=external-link><a href="http://status.dwolla.com/" target=_blank><span class=icon-sidenav-option>Status</span></a></li></ul><h6>The API Basics</h6><ul><li><a href=/resources/account-types.html>Account types</a><ul></ul></li><li><a href=/resources/bank-transfer-workflow.html>Bank transfer workflow</a><ul><li><a href=/resources/bank-transfer-workflow/processing-times.html>Processing times</a></li><li><a href=/resources/bank-transfer-workflow/transfer-failures.html>Transfer failures</a></li></ul></li><li><a href=/resources/customer-verification.html>Customer verification</a><ul><li><a href=/resources/customer-verification/personal-verified-customers.html>Personal verified Customers</a></li><li><a href=/resources/customer-verification/business-verified-customers.html>Business verified Customers</a></li><li><a href=/resources/customer-verification/handling-verification-statuses.html>Handling verification statuses</a></li></ul></li><li><a href=/resources/funding-source-verification.html>Funding source verification</a><ul><li><a href=/resources/funding-source-verification/micro-deposit-verification.html>Micro-deposit verification</a></li><li><a href=/resources/funding-source-verification/instant-account-verification.html>Instant account verification</a></li></ul></li><li><a href=/resources/testing.html>Testing in the Sandbox</a><ul></ul></li></ul><h6>Features</h6><ul><li><a href=/resources/dwolla-js.html>Dwolla.js</a><ul><li><a href=/resources/dwolla-js/add-a-bank-account.html>Add a bank account</a></li><li><a href=/resources/dwolla-js/instant-account-verification.html>Instant account verification</a></li><li><a href=/resources/dwolla-js/on-demand-bank-transfers.html>On-demand bank transfers</a></li></ul></li><li><a href=/resources/facilitator-fee.html>Facilitator fee</a><ul></ul></li><li><a href=/resources/same-day-ach.html>Same Day ACH</a><ul></ul></li><li><a href=/resources/wire-transfer-api.html>Wire transfer API</a><ul></ul></li></ul><h6>Integrations</h6><ul><li><a href=/resources/dwolla-plaid-integration.html>Dwolla + Plaid Integration</a><ul></ul></li><li><a href=/resources/dwolla-sift-science-integration.html>Sift Science Integration</a><ul></ul></li></ul></section></nav><nav class="side-nav js-side-nav"><section id=js-sidenav-dropdown class=side-nav__dropdown><ul><li><a href=https://docsv2.dwolla.com/#introduction>Introduction</a></li><li><a href=https://docsv2.dwolla.com/#oauth>OAuth</a></li><li><a href=https://docsv2.dwolla.com/#customers>Customers</a></li><li><a href=https://docsv2.dwolla.com/#documents>Documents</a></li><li><a href=https://docsv2.dwolla.com/#funding-sources>Funding Sources</a></li><li><a href=https://docsv2.dwolla.com/#transfers>Transfers</a></li><li><a href=https://docsv2.dwolla.com/#events>Events</a></li><li><a href=https://docsv2.dwolla.com/#webhook-subscriptions>Webhook Subscriptions</a></li><li><a href=https://docsv2.dwolla.com/#webhooks>Webhooks</a></li></ul></section></nav></section><section class=cnt-two-col__content><h1 id=off-site-gateway-checkout>Off-Site Gateway Checkout</h1><h2 id=server-to-server-submission>Server-to-server submission</h2><p>In order to initialize server-to-server submission, the merchant website must POST a request to the Off-Site Gateway API providing a JSON formatted purchase order placed in the body of the request.</p><h3 id=creating-a-request>Creating a request</h3><h4 id=http-request>HTTP request</h4><p><code>POST https://www.dwolla.com/oauth/rest/offsitegateway/checkout</code></p><h5 id=request-parameters>Request parameters</h5><table><thead><tr><th>Parameter</th><th>Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>client_id</td><td>yes</td><td>string</td><td>Your Application Key</td></tr><tr><td>client_secret</td><td>yes</td><td>string</td><td>Your Application Secret</td></tr><tr><td>callback</td><td>yes</td><td>string</td><td>Dwolla will POST a Callback containing results of the checkout when it is completed.</td></tr><tr><td>redirect</td><td>yes</td><td>string</td><td>User will be redirected to this URL after successfully checking out, or cancelling.</td></tr><tr><td>purchaseOrder</td><td>yes</td><td>object</td><td>A purchaseOrder JSON object. See below.</td></tr><tr><td>checkoutWithApi</td><td>no</td><td>boolean</td><td>Create a <em>PayLater</em> checkout. Defaults to <code>false</code>.</td></tr><tr><td>allowGuestCheckout</td><td>no</td><td>boolean</td><td>Enable <a href=https://developers.dwolla.com/dev/pages/gateway/direct>Dwolla Direct</a> experience for users without a Dwolla account</td></tr><tr><td>orderId</td><td>no</td><td>string</td><td>Custom string to identify the checkout. Not persisted in resulting transaction.</td></tr><tr><td>allowFundingSources</td><td>no</td><td>boolean</td><td>Allow the user to pay with a funding source other than their account Balance. Defaults to <code>false</code>.</td></tr><tr><td>additionalFundingSources</td><td>no</td><td>string</td><td>If <code>allowFundingSources</code> enabled, use this to filter the types of funding sources allowed.<br><code>banks</code>: Only allow bank (ACH) funding sources<br><code>fisync</code>: Only allow FiSync-enabled bank funding sources<br><code>realtime</code>: Only allow <code>fisync</code> sources<br><code>true</code>: Allow all funding source types<br><code>false</code>: Do not allow any funding sources</td></tr></tbody></table><h5 id=purchaseorder-object>PurchaseOrder object</h5><table><thead><tr><th>Parameter</th><th>Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>destinationId</td><td>yes</td><td>string</td><td>Dwolla ID of the user who will receive the payment in this checkout.</td></tr><tr><td>total</td><td>yes</td><td>decimal</td><td>Total checkout amount.</td></tr><tr><td>tax</td><td>no</td><td>decimal</td><td>Order tax total. For order display purposes only, not persisted.</td></tr><tr><td>discount</td><td>no</td><td>decimal</td><td>Order discount (must be negative). For order display purposes only, not persisted.</td></tr><tr><td>shipping</td><td>no</td><td>decimal</td><td>Order shipping total. For order display purposes only, not persisted.</td></tr><tr><td>notes</td><td>no</td><td>string</td><td>A note of max 250 chars. to attach to the resulting payment.</td></tr><tr><td>facilitatorAmount</td><td>no</td><td>decimal</td><td>Amount of the facilitator fee to override. Only applicable if the facilitator fee feature is enabled. If set to <code>0</code>, facilitator fee is disabled for transaction.</td></tr><tr><td>metadata</td><td>no</td><td>object</td><td>An object containing up to 10 key-value pairs of your choice which is persisted with the resulting transaction. <a href=https://docs.dwolla.com/#metadata>Learn about Metadata</a></td></tr><tr><td>orderItems</td><td>no</td><td>array</td><td>An array of JSON object(s) which contain a <code>name</code>, <code>description</code>, <code>quantity</code>, and <code>price</code>.</td></tr></tbody></table><h3 id=finishing-checkout>Finishing checkout</h3><h4 id=request-url>Request URL</h4><p><code>https://www.dwolla.com/payment/checkout/{CheckoutId}</code></p><p>The merchant&rsquo;s website will now need to redirect the user to the checkout endpoint providing the unique checkoutID within 5 minutes. After 5 minutes, the checkout ID will expire and a new request will need to be generated. Depending on the checkout flow used, the user will either complete the transaction on the Dwolla gateway and be redirected to a confirmation page on the merchant&rsquo;s site, or will be redirected to the merchant&rsquo;s site in order to complete the order and fulfill payment.</p><h3 id=example-using-dwollas-v1-libraries>Example using Dwolla&rsquo;s v1 libraries</h3><p>The Dwolla API v1 <a href=https://docs.dwolla.com/#helper-libraries>libraries</a> available on GitHub have implemented the server-to-server checkout flow. The code samples below are designed to help get you started immediately. In order to customize data sent and used by the library, use the <a href="/guides/server-to-server/">server-to-server</a> specification and follow the pay now flow.</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>POST https://www.dwolla.com/oauth/rest/offsitegateway/checkouts
Content-Type: application/json
{
  "client_id": "JCGQXLrlfuOqdUYdTcLz3rBiCZQDRvdWIUPkw++GMuGhkem9Bo",
  "client_secret": "g7QLwvO37aN2HoKx1amekWi8a2g7AIuPbD5C/JSLqXIcDOxfTr",
  "callback": "http://www.something.com/callback",
  "redirect": "http://www.something.com/return",
  "allowGuestCheckout": "true",
  "checkoutWithApi": "false",
  "orderId": "foo123",
  "allowFundingSources": "true",
  "additionalFundingSources": "true",
  "purchaseOrder": {
        "orderItems": [
            {
                "name": "Some item", 
                "description": "This is a description of some item", 
                "quantity": "1", 
                "price": "15.00"
            }
        ],
    "destinationId": "812-740-4294",
    "total": 15.00,
    "notes": "for the purchase of some item",
    "metadata": {
        "key1": "some value",
        "key2": "another value"
    }
  }
}
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python><span class=c># Using dwolla-python - https://github.com/Dwolla/dwolla-python</span>
<span class=kn>from</span> <span class=nn>dwolla</span> <span class=kn>import</span> <span class=n>checkouts</span>

<span class=c># Step 1: Create checkout session with items from</span>
<span class=c># http://docs.dwolla.com/#checkouts</span>

<span class=n>test</span> <span class=o>=</span> <span class=n>checkouts</span><span class=o>.</span><span class=n>create</span><span class=p>({</span>
    <span class=s>'orderItems'</span><span class=p>:</span> <span class=p>{</span>
        <span class=nb>frozenset</span><span class=p>({</span>
            <span class=s>'name'</span><span class=p>:</span> <span class=s>'Some item'</span><span class=p>,</span>
            <span class=s>'description'</span><span class=p>:</span> <span class=s>'This is a description of some item'</span><span class=p>,</span>
            <span class=s>'quantity'</span><span class=p>:</span> <span class=s>'1'</span><span class=p>,</span>
            <span class=s>'price'</span><span class=p>:</span> <span class=s>'15.00'</span>
        <span class=p>})</span>
    <span class=p>},</span>
    <span class=s>'destinationId'</span><span class=p>:</span> <span class=s>'812-740-4294'</span><span class=p>,</span>
    <span class=s>'total'</span><span class=p>:</span> <span class=mf>15.00</span><span class=p>,</span>
    <span class=s>'notes'</span><span class=p>:</span> <span class=s>'for the purchase of some item'</span><span class=p>,</span>
    <span class=s>'metadata'</span><span class=p>:</span> <span class=nb>frozenset</span><span class=p>({</span>
        <span class=s>'key1'</span><span class=p>:</span> <span class=s>'some value'</span><span class=p>,</span>
        <span class=s>'key2'</span><span class=p>:</span> <span class=s>'another value'</span>
    <span class=p>})})</span>

<span class=c># Step 2: Verify the recently created checkout</span>

<span class=n>checkouts</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>test</span><span class=p>[</span><span class=s>'CheckoutId'</span><span class=p>])</span>

<span class=c># Step 3: Complete the checkout</span>

<span class=n>checkouts</span><span class=o>.</span><span class=n>complete</span><span class=p>(</span><span class=s>'Order ID here'</span><span class=p>)</span>

<span class=c># Step 4: Verify gateway signature</span>

<span class=n>checkouts</span><span class=o>.</span><span class=n>verify</span><span class=p>(</span><span class=s>'YOUR SIGNATURE HERE'</span><span class=p>,</span> <span class=s>'YOUR CHECKOUT ID HERE'</span><span class=p>,</span> <span class=mf>4.50</span><span class=p>)</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript><span class=c1>// Using dwolla-node - https://github.com/Dwolla/dwolla-node</span>
<span class=kd>var</span> <span class=nx>cfg</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>'./_config'</span><span class=p>)</span>    <span class=c1>// Include any required keys</span>
    <span class=p>,</span> <span class=nx>dwolla</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>'dwolla-node'</span><span class=p>)(</span><span class=nx>cfg</span><span class=p>.</span><span class=nx>apiKey</span><span class=p>,</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>apiSecret</span><span class=p>)</span>    <span class=c1>// Include the Dwolla REST Client</span>
    <span class=p>,</span> <span class=nx>$</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>'seq'</span><span class=p>)</span>
    <span class=p>,</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>'express'</span><span class=p>)</span>
    <span class=p>,</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>()</span>
    <span class=p>,</span> <span class=nx>util</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>'util'</span><span class=p>)</span>
    <span class=p>;</span>

<span class=c1>// Some constants...</span>
<span class=kd>var</span> <span class=nx>redirect_uri</span> <span class=o>=</span> <span class=s1>'http://localhost:3000/redirect'</span><span class=p>;</span>

<span class=c1>// Use Dwolla Sandbox API</span>
<span class=nx>dwolla</span><span class=p>.</span><span class=nx>sandbox</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>

<span class=cm>/**
 * EXAMPLE 1: (simple example)
 *   Create a new standard offsite gateway checkout
 **/</span>
<span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>'/'</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>{</span>
    <span class=kd>var</span> <span class=nx>purchaseOrder</span> <span class=o>=</span> <span class=p>{</span>
     <span class=na>destinationId</span><span class=p>:</span> <span class=s1>'812-740-4294'</span><span class=p>,</span>
     <span class=na>total</span><span class=p>:</span> <span class=s1>'5.00'</span>
    <span class=p>};</span>

    <span class=kd>var</span> <span class=nx>params</span> <span class=o>=</span> <span class=p>{</span>
     <span class=na>allowFundingSources</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
     <span class=na>orderId</span><span class=p>:</span> <span class=s1>'123456789'</span><span class=p>,</span>
    <span class=p>};</span>

    <span class=nx>dwolla</span><span class=p>.</span><span class=nx>createCheckout</span><span class=p>(</span><span class=nx>redirect_uri</span><span class=p>,</span> <span class=nx>purchaseOrder</span><span class=p>,</span> <span class=nx>params</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>checkout</span><span class=p>)</span> <span class=p>{</span>
     <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>

      <span class=c1>// example checkout result:</span>
      <span class=c1>// { checkoutURL: 'https://sandbox.dwolla.com/payment/checkout/d0429a55-c338-4139-b273-48d2f8c45693',</span>
      <span class=c1>//   checkoutId: 'd0429a55-c338-4139-b273-48d2f8c45693' }</span>

     <span class=nx>res</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=nx>util</span><span class=p>.</span><span class=nx>format</span><span class=p>(</span><span class=s1>'Checkout created.  Click to continue: &lt;a href="%s"&gt;%s&lt;/a&gt;'</span><span class=p>,</span> <span class=nx>checkout</span><span class=p>.</span><span class=nx>checkoutURL</span><span class=p>,</span> <span class=nx>checkout</span><span class=p>.</span><span class=nx>checkoutURL</span><span class=p>));</span>
    <span class=p>});</span>
<span class=p>});</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby><span class=c1># Using dwolla-ruby - https://github.com/Dwolla/dwolla-ruby</span>
<span class=c1># Include the Dwolla gem</span>
<span class=nb>require</span> <span class=s1>'rubygems'</span>
<span class=nb>require</span> <span class=s1>'pp'</span>
<span class=nb>require</span> <span class=s1>'dwolla'</span>

<span class=c1># Include any required keys</span>
<span class=nb>require</span> <span class=s1>'./_keys.rb'</span>

<span class=c1># Instantiate a new Dwolla User client</span>
<span class=no>Dwolla</span><span class=o>::</span><span class=n>api_key</span> <span class=o>=</span> <span class=vi>@api_key</span>
<span class=no>Dwolla</span><span class=o>::</span><span class=n>api_secret</span> <span class=o>=</span> <span class=vi>@api_secret</span>

<span class=c1># Clear out any previous session data</span>
<span class=no>Dwolla</span><span class=o>::</span><span class=no>OffsiteGateway</span><span class=p>.</span><span class=nf>clear_session</span>

<span class=c1># Optional Settings</span>
<span class=no>Dwolla</span><span class=o>::</span><span class=no>OffsiteGateway</span><span class=p>.</span><span class=nf>redirect</span> <span class=o>=</span> <span class=s1>'http://dwolla.com/payment_redirect'</span>
<span class=no>Dwolla</span><span class=o>::</span><span class=no>OffsiteGateway</span><span class=p>.</span><span class=nf>callback</span> <span class=o>=</span> <span class=s1>'http://dwolla.com/payment_callback'</span>
<span class=no>Dwolla</span><span class=o>::</span><span class=no>OffsiteGateway</span><span class=p>.</span><span class=nf>set_customer_info</span><span class=p>(</span><span class=s1>'Jane'</span><span class=p>,</span> <span class=s1>'Doe'</span><span class=p>,</span> <span class=s1>'janedoe@email.com'</span><span class=p>,</span> <span class=s1>'New York'</span><span class=p>,</span> <span class=s1>'NY'</span><span class=p>,</span> <span class=s1>'10001'</span><span class=p>)</span>
<span class=no>Dwolla</span><span class=o>::</span><span class=no>OffsiteGateway</span><span class=p>.</span><span class=nf>discount</span> <span class=o>=</span> <span class=mi>4</span><span class=o>.</span><span class=mi>95</span>
<span class=no>Dwolla</span><span class=o>::</span><span class=no>OffsiteGateway</span><span class=p>.</span><span class=nf>notes</span> <span class=o>=</span> <span class=s1>'This is just an offsite gateway test...'</span>

<span class=c1># Add products</span>
<span class=no>Dwolla</span><span class=o>::</span><span class=no>OffsiteGateway</span><span class=p>.</span><span class=nf>add_product</span><span class=p>(</span><span class=s1>'Some product'</span><span class=p>,</span> <span class=s1>'This is a description of some product'</span><span class=p>,</span> <span class=mi>499</span><span class=o>.</span><span class=mi>99</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>

<span class=c1># Generate a checkout sesssion</span>
<span class=n>pp</span> <span class=no>Dwolla</span><span class=o>::</span><span class=no>OffsiteGateway</span><span class=p>.</span><span class=nf>get_checkout_url</span><span class=p>(</span><span class=s1>'812-734-7288'</span><span class=p>)</span>

<span class=c1># Verify and parse gateway callback</span>
<span class=n>data</span> <span class=o>=</span> <span class=no>Dwolla</span><span class=o>::</span><span class=no>OffsiteGateway</span><span class=p>.</span><span class=nf>read_callback</span><span class=p>(</span><span class=s1>'{"Amount":0.01,"OrderId":null,"Status":"Completed","Error":null,"TransactionId":3396300,"CheckoutId":"51f9dfaa-20ed-41a7-8874-00a47c19c655","Signature":"8be03dfd0e95c567b2855f5876acfc98992f6402","TestMode":"false","ClearingDate":"7/22/2013 8:42:18 PM"}'</span><span class=p>)</span>
<span class=n>pp</span> <span class=n>data</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php><span class=cp>&lt;?php</span>
<span class=sd>/**
 * Using dwolla-php - https://github.com/Dwolla/dwolla-php
 * The following is a quick-start example for the Checkouts class,
 * which encapsulates methods for all offsite-gateway related endpoints.
 */</span>
<span class=c1>// We need the Checkouts class in order to do anything
</span><span class=k>require</span> <span class=s1>'../lib/checkouts.php'</span><span class=p>;</span>
<span class=nv>$Checkouts</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Dwolla\Checkouts</span><span class=p>();</span>
<span class=sd>/**
 * Optional: DwollaPHP has a very rudimentary shopping-cart
 * function. You can "make" your own cart and the
 * library will automatically calculate totals for you.
 * For the purpose of this example, we will add two
 * cups of coffee to our cart.
 */</span>
<span class=nv>$Checkouts</span><span class=o>-&gt;</span><span class=na>addToCart</span><span class=p>(</span><span class=s2>"Coffee 1"</span><span class=p>,</span> <span class=s2>"Mmm, fresh!"</span><span class=p>,</span> <span class=mf>2.25</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
<span class=nv>$Checkouts</span><span class=o>-&gt;</span><span class=na>addToCart</span><span class=p>(</span><span class=s2>"Coffee 2"</span><span class=p>,</span> <span class=s2>"Another coffee!"</span><span class=p>,</span> <span class=mf>2.25</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
<span class=sd>/**
 * Step 1: Create a checkout session with the cart you have just created.
 * The array passed in contains members of the
 * `purchaseOrder` parameter. The second array marks this as a
 * `test` in order to...well...test.
 */</span>
<span class=nv>$test</span> <span class=o>=</span> <span class=nv>$Checkouts</span><span class=o>-&gt;</span><span class=na>create</span><span class=p>(</span>
    <span class=p>[</span> <span class=s1>'destinationId'</span> <span class=o>=&gt;</span> <span class=s1>'812-111-7219'</span> <span class=p>],</span>
    <span class=p>[</span> <span class=s1>'redirect'</span> <span class=o>=&gt;</span> <span class=s1>'http://requestb.in/1fglpx81'</span> <span class=p>]</span>
<span class=p>);</span>
<span class=nb>print_r</span><span class=p>(</span><span class=nv>$test</span><span class=p>);</span>
<span class=sd>/**
 * Step 2: Verify gateway signature
 */</span>
<span class=nb>print_r</span><span class=p>(</span><span class=nv>$Checkouts</span><span class=o>-&gt;</span><span class=na>verify</span><span class=p>(</span><span class=s1>'YOUR SIGNATURE HERE'</span><span class=p>,</span> <span class=s1>'YOUR CHECKOUT ID HERE'</span><span class=p>,</span> <span class=mf>4.50</span><span class=p>));</span>
<span class=cp>?&gt;</span>
</code></pre></div></div><h2 id=implementing-the-pay-now-flow>Implementing the pay now flow</h2><p>Implementation is dependent on which checkout flow is used. We&rsquo;re going to walk you through what you need to do to get started with the pay now flow.</p><h3 id=1-handling-the-callback><strong>1. Handling the <code>callback</code></strong></h3><p>If callback is set with a callback URL, Dwolla will POST an application/json request to your URL with some information:</p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>Amount</td><td>Total amount of purchase formatted to two decimal places.</td></tr><tr><td>CheckoutID</td><td>Unique purchase order ID generated by the off-site gateway.</td></tr><tr><td>ClearingDate</td><td>Date and time in which the funds are to be cleared into the destination account. ClearingDate will return a ISO-8601 formatted timestamp.</td></tr><tr><td>Error</td><td>Any error(s) that occurred during checkout.</td></tr><tr><td>OrderId</td><td>Order ID provided during the request.</td></tr><tr><td>Signature</td><td>HMAC-SHA1 hexadecimal hash of the checkoutId and amount ampersand separated using the consumer secret of the application as the hash key.</td></tr><tr><td>Status</td><td>Status of the checkout session. Possible values: Completed, and Failed.</td></tr><tr><td>TestMode</td><td>Set to &lsquo;true&rsquo; if purchase order is for testing purposes only, otherwise &lsquo;false&rsquo;.</td></tr><tr><td>TransactionId</td><td>Dwolla transaction ID to identify the successful transaction. If in test mode, the transaction ID has a value of &lsquo;null&rsquo;.</td></tr></tbody></table><h5 id=example-http-post>Example HTTP Post</h5><div class="code-snippet js-code-snippet language-nohide"><button class="btn alternative">copy</button><div class="code-snippet__cnt highlight"><pre><code class=language-nohide data-lang=nohide>POST https://www.example.com/payment_callback HTTP/1.1
Content-Type: application/json
Content-Length: 252

{
  "Amount": 0.01,
  "CheckoutId": "f32b1e55-9612-4b6d-90f9-1c1519e588da",
  "ClearingDate": "8/28/2012 3:17:18 PM",
  "Error": null,
  "OrderId": null,
  "Signature": "c50e4b2a4c50ad795c3ee31370aec1a563565aa4",
  "Status": "Completed",
  "TestMode": "false",
  "TransactionId": 1312616
}
</code></pre></div></div><h3 id=2-handling-the-user-redirect><strong>2. Handling the user redirect</strong></h3><p>When the user is redirected back to the specified merchant&rsquo;s website in redirect, information will be included in the redirect URL&rsquo;s querystring parameters:</p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>checkoutId</td><td>Unique purchase order ID generated by Off-Site Gateway.</td></tr><tr><td>orderId</td><td>Order ID provided during the request.</td></tr><tr><td>test</td><td>Flagged to &lsquo;true&rsquo; if purchase order is for testing purposes only, absent otherwise.</td></tr><tr><td>transaction</td><td>Dwolla transaction ID to identify the successful transaction. If in test mode, the transaction ID has a value of &lsquo;null&rsquo;.</td></tr><tr><td>postback</td><td>If the callback URL provided and the postback response completed succesfully, a value of &ldquo;success&rdquo;. If the callback URL provided is not valid and the postback response completed unsuccessfully, a value of &ldquo;failed&rdquo;.</td></tr><tr><td>amount</td><td>Total amount of the purchase formatted to two decimal places.</td></tr><tr><td>signature</td><td>HMAC-SHA1 hexadecimal hash of the checkoutId and amount ampersand separated using the consumer secret of the application as the hash key.</td></tr><tr><td>clearingDate</td><td>Date and time in which the funds are to be cleared into the destination account. ClearingDate will return a ISO-8601 formatted timestamp.</td></tr><tr><td>status</td><td>Status of the checkout session. Possible values: Completed, and Failed.</td></tr></tbody></table><h5 id=url-example-success-and-failure>URL example - success and failure</h5><div class="code-snippet js-code-snippet language-nohide"><button class="btn alternative">copy</button><div class="code-snippet__cnt highlight"><pre><code class=language-nohide data-lang=nohide>// Success
Format: https://www.myurl.com/redirect?signature={}&amp;orderId={}&amp;amount={}&amp;checkoutId={}&amp;status={}&amp;clearingDate={}&amp;transaction={}&amp;postback={}

Example: https://www.myurl.com/redirect?signature=c50e4b2a4c50ad795c3ee31370aec1a563565aa4&amp;orderId=&amp;amount=0.01&amp;checkoutId=f32b1e55-9612-4b6d-90f9-1c1519e588da&amp;status=Completed&amp;clearingDate=8/28/2012%203:17:18%20PM&amp;transaction=1312616&amp;postback=success

// Failure
Format: https://www.myurl.com/redirect?checkoutId={}&amp;error=failure&amp;error_description={}

Example: https://www.myurl.com/redirect?checkoutId=694e6bcb-349f-451d-bf5d-8aa16530c960&amp;error=failure&amp;error_description=There+are+insufficient+funds+for+this+transaction

Possible error_descriptions:
"Payment has already been generated for application, timestamp, and order ID."
"Invalid callback URL"
"Invalid application signature."
"Invalid timestamp."
"Invalid application credentials."
"There are insufficient funds for this transaction."
"User Cancelled"
"Invalid destination user."
</code></pre></div></div><h3 id=3-handling-verification-security-recommended><strong>3. Handling verification / security - recommended</strong></h3><p>In both the user redirect querystring, and the callback POST request, Dwolla includes a signature that can be used to authenticate Dwolla&rsquo;s server identity. It is not required to do this, but highly recommended in order to ensure the safety of both you, the merchant, and the customer. The signature is an HMAC-SHA1 hexadecimal hash of the checkoutId and amount ampersand separated using the consumer secret of the application as the hash key.</p><h5 id=example-signature-verification>Example signature verification</h5><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>not applicable
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>verify_gateway_signature</span><span class=p>(</span><span class=n>proposed_signature</span><span class=p>,</span> <span class=n>checkout_id</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span>
  <span class=kn>import</span> <span class=nn>hmac</span>
  <span class=kn>import</span> <span class=nn>hashlib</span>

  <span class=n>raw</span> <span class=o>=</span> <span class=s>'</span><span class=si>%</span><span class=s>s&amp;</span><span class=si>%.2</span><span class=s>f'</span> <span class=o>%</span> <span class=p>(</span><span class=n>checkout_id</span><span class=p>,</span> <span class=n>amount</span><span class=p>)</span>
  <span class=n>signature</span> <span class=o>=</span> <span class=n>hmac</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=n>client_secret</span><span class=p>,</span> <span class=n>raw</span><span class=p>,</span> <span class=n>hashlib</span><span class=o>.</span><span class=n>sha1</span><span class=p>)</span><span class=o>.</span><span class=n>hexdigest</span><span class=p>()</span>

  <span class=k>return</span> <span class=bp>True</span> <span class=k>if</span> <span class=p>(</span><span class=n>signature</span> <span class=o>==</span> <span class=n>proposed_signature</span><span class=p>)</span> <span class=k>else</span> <span class=bp>False</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript><span class=kd>var</span> <span class=nx>verifyGatewaySignature</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>proposed_signature</span><span class=p>,</span> <span class=nx>checkout_id</span><span class=p>,</span> <span class=nx>amount</span><span class=p>)</span> <span class=p>{</span>
  <span class=kd>var</span> <span class=nx>crypto</span>    <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>'crypto'</span><span class=p>)</span>
  <span class=p>,</span> <span class=nx>secret</span>      <span class=o>=</span> <span class=s1>'API_SECRET_HERE'</span>
  <span class=p>,</span> <span class=nx>text</span>        <span class=o>=</span> <span class=nx>checkout_id</span> <span class=o>+</span> <span class=s1>'&amp;'</span> <span class=o>+</span> <span class=nx>amount</span> <span class=o>+</span> <span class=s1>'&amp;'</span> <span class=o>+</span> <span class=nx>order_id</span>
  <span class=p>,</span> <span class=nx>hash</span><span class=p>;</span>

<span class=nx>hash</span> <span class=o>=</span> <span class=nx>crypto</span><span class=p>.</span><span class=nx>createHmac</span><span class=p>(</span><span class=s1>'sha1'</span><span class=p>,</span> <span class=nx>secret</span><span class=p>).</span><span class=nx>update</span><span class=p>(</span><span class=nx>text</span><span class=p>).</span><span class=nx>digest</span><span class=p>(</span><span class=s1>'hex'</span><span class=p>);</span>

<span class=k>return</span> <span class=nx>proposed_signature</span> <span class=o>===</span> <span class=nx>hash</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby><span class=k>def</span> <span class=nc>self</span><span class=o>.</span><span class=nf>valid_dwolla_signature?</span><span class=p>(</span><span class=n>proposed_signature</span><span class=p>,</span> <span class=n>checkout_id</span><span class=p>,</span> <span class=n>amount</span><span class=p>)</span>
  <span class=nb>require</span> <span class=s1>'base64'</span>
  <span class=nb>require</span> <span class=s1>'openssl'</span>

  <span class=n>raw</span> <span class=o>=</span> <span class=s2>"</span><span class=si>#{</span><span class=n>checkout_id</span><span class=si>}</span><span class=s2>&amp;</span><span class=si>#{</span><span class=n>amount</span><span class=si>}</span><span class=s2>"</span>
  <span class=n>digest</span>  <span class=o>=</span> <span class=no>OpenSSL</span><span class=o>::</span><span class=no>Digest</span><span class=o>::</span><span class=no>Digest</span><span class=p>.</span><span class=nf>new</span><span class=p>(</span><span class=s1>'sha1'</span><span class=p>)</span>
  <span class=n>signature</span> <span class=o>=</span> <span class=no>OpenSSL</span><span class=o>::</span><span class=no>HMAC</span><span class=p>.</span><span class=nf>hexdigest</span><span class=p>(</span><span class=n>digest</span><span class=p>,</span> <span class=n>client_secret</span><span class=p>,</span> <span class=n>raw</span><span class=p>)</span>
  <span class=k>return</span> <span class=p>(</span><span class=n>signature</span> <span class=o>==</span> <span class=n>proposed_signature</span><span class=p>)</span>
<span class=k>end</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php><span class=cp>&lt;?php</span>
<span class=k>function</span> <span class=nf>verifyGatewaySignature</span><span class=p>(</span><span class=nv>$proposedSignature</span><span class=p>,</span> <span class=nv>$checkoutId</span><span class=p>,</span> <span class=nv>$amount</span><span class=p>)</span> <span class=p>{</span>
    <span class=nv>$amount</span> <span class=o>=</span> <span class=nb>number_format</span><span class=p>(</span><span class=nv>$amount</span><span class=p>,</span> <span class=mi>2</span><span class=p>);</span>
    <span class=nv>$signature</span> <span class=o>=</span> <span class=nb>hash_hmac</span><span class=p>(</span><span class=s2>"sha1"</span><span class=p>,</span> <span class=s2>"</span><span class=si>{</span><span class=nv>$checkoutId</span><span class=si>}</span><span class=s2>&amp;</span><span class=si>{</span><span class=nv>$amount</span><span class=si>}</span><span class=s2>"</span><span class=p>,</span> <span class=nv>$apiSecret</span><span class=p>);</span>

    <span class=k>return</span> <span class=nv>$signature</span> <span class=o>==</span> <span class=nv>$proposedSignature</span><span class=p>;</span>
<span class=p>}</span>
<span class=cp>?&gt;</span>
</code></pre></div></div><nav class=pager-nav><a href="./">Back: Overview</a> <a href="" style=display:none></a></nav><hr><footer><div class=page-wrap><nav><h6>Product</h6><a href=https://www.dwolla.com/platform>Platform</a> <a href=https://www.dwolla.com/bank-transfers>Bank Transfers</a> <a href=https://www.dwolla.com/same-day-ach>Expedited Payments</a> <a href=https://www.dwolla.com/dwollajs-bank-verification>Instant Bank Account Verification</a> <a href=https://www.dwolla.com/mass-payments-api>Mass Payments</a> <a href="https://www.dwolla.com/integrations?b=footer">Integrations</a> <a href=https://www.dwolla.com/white-label>White Label</a> <a href=https://www.dwolla.com/ach-transfer-dashboard>Dashboard</a></nav><nav><h6>Legal</h6><a href="https://www.dwolla.com/legal/tos/">Terms of Service</a> <a href="https://www.dwolla.com/legal/privacy/">Privacy Policy</a> <a href=https://www.dwolla.com/security>Security</a> <a href="https://www.dwolla.com/legal/about-our-financial-institution-partner/">Financial Institution Partners</a></nav><nav><h6>Learn More</h6><a href="https://www.dwolla.com/case-studies?b=accesscta1">Case Studies</a> <a href="https://www.dwolla.com/updates/">Blog</a> <a href=https://www.dwolla.com/industry-initiatives>Industry Initiatives</a> <a href="https://developers.dwolla.com/?b=footer">Developer Resources</a></nav><nav><h6>Company</h6><a href="https://www.dwolla.com/about?b=footer">About</a> <a href=https://www.dwolla.com/careers>Careers</a> <a href=https://www.dwolla.com/press>Press</a> <a href="https://www.dwolla.com/contact?b=footer">Contact Us</a></nav></div></footer><section class=disclaimer><div class=page-wrap><h5>Financial institutions play an important role in the Dwolla network.</h5><p>Dwolla, Inc. is an agent of Veridian Credit Union and Compass Bank and all funds associated with your account in the Dwolla network are held in pooled accounts at Veridian Credit Union and Compass Bank. These funds are not eligible for individual insurance, including FDIC insurance and may not be eligible for share insurance by the National Credit Union Share Insurance Fund. Dwolla, Inc. is the operator of a software platform that communicates user instructions for funds transfers to Veridian Credit Union and Compass Bank.</p></div></section><section class=copyright><div class=page-wrap><div><span>&copy; 2018 Dwolla, Inc.</span> <a href="https://www.dwolla.com/legal/about-our-financial-institution-partner/">Dwolla, Inc. is an agent of its Financial Institution Partner(s)</a></div></div></section></section></div></div></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script>window.jQuery || document.write('<script src="/_bower_components/jquery/jquery.min.js"><\/script>')</script><script src=/js/script.c827.js></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-30404064-1');ga('send','pageview');</script><script type=text/javascript>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/dfdjs7vb';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()

  window.Intercom('boot', {
    app_id: 'dfdjs7vb'
  });</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WRT5LD6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript></body></html>